# 腾讯微信跳一跳破解（目前最高19844分）

## 一. 效果展示

为了更好的展示运行效果，我贴一个刚刚录制的视频。http://v.youku.com/v_show/id_XMzI4NzM4MzI0NA==.html?spm=a2h0k.8191407.0.0&from=s1.8-1-1.2

![](img/1.jpg)
![](img/2.png)
![](img/5.gif)

## 二. 实现原理

具体识别的算法，我现在没有时间总结了，大家可以先看源码。源码中部分参数是在笔者的手机上进行调试的（分辨率为1080），大家可以根据自己手机，进行相应修改。

### 主要步骤

1. 识别玩家位置

	如下图中白色空心方格所示：
	
	![](img/3.png)

1. 识别目标方块位置

	如下图中红色实心方格所示，识别最上面的顶点，最左边的点，与最右边的点，从而计算出中心点：
	
	![](img/4.png)

1. 识别目标方块中心圆点的位置

	如果你前一次踩中中心点，会有下一个中心点的提示（一个白色的圆点）。
	
### 流程

1. 通过ADB截屏；
2. 通过ADB将截屏保存到电脑；
3. 识别玩家位置；
4. 识别目标方块位置；
5. 识别目标方块中心圆点的位置；
6. 如果第5步成功，则取第5步的中心点为下一步的位置；否则，取第4步的中心点为下一步的位置；
7. 计算玩家位置与下一步的位置，乘以一定的系数，得到长按的时间；
8. 通过ADB，触发长按；
	
## 三. 运行条件

1. 准备Java运行与编译环境；
2. 安装Android SDK；
3. 准备好一部已经打开开发者模式的Android手机，请确认是否adb已经联接上你的手机；如果adb连接失败，则会导致截图与拉取截图失败，提示“find myPos, fail”；打开开发者选项，找到“USB调试（安全设置）允许通过USB调试修改权限或者模拟点击”（在mui上是这样的，在其他手机上，应该也是差不多这样）这个开关，打开它；
4. 修改com.skyline.wxjumphack.Hack中ADB_PATH，将其改为你自己的ADB位置；
5. 打开微信，打开跳一跳游戏，并点击开始；
6. 运行程序吧，骚年，观察它自动跳动；

## 四. 温馨提示

1. 有些同学反馈，程序报错，提示找不到文件或者“find myPos, fail”。请确认是否adb已经联接上你的手机；如果adb连接失败，则会导致截图与拉取截图失败。
2. 有些同学反馈，位置都计算出来了，但是没有触发弹跳。打开开发者选项，找到“USB调试（安全设置）允许通过USB调试修改权限或者模拟点击”（在mui上是这样的，在其他手机上，应该也是差不多这样）这个开关，打开它。
3. 这个小游戏，后来腾讯好像加了一些干扰的动效，会干扰位置计算。后期可以优化。
4. 因为我总共才花了3小时去破解，主要的时间都花了前期的识别算法的优化上。代码中，还有很多魔法值什么的，代码也比较乱。如果要阅读的话，还请见谅。
5. 有同学反馈，跳几步就掉下去了。主要原因是弹跳系数的问题，我是根据我的自己的手机（1080p分辨率）来调试的。如果你的手机分辨率，不是1080p，则需要修改弹跳系数（JUMP_RATIO）。
6. 至于位置计算的准确性，请运行MyPosFinder.java与NextCenterFinder.java中的main方法，观察生成文件，查看标记的位置是否正确。
